[gd_scene load_steps=18 format=3 uid="uid://dc3g803l8bxsg"]

[ext_resource type="PackedScene" uid="uid://cpfggxvqf6g2b" path="res://scenes/player/player.tscn" id="1_d0qum"]
[ext_resource type="Script" uid="uid://bn61va2ovt4xl" path="res://scenes/game/scripts/town.gd" id="1_klhe0"]
[ext_resource type="PackedScene" uid="uid://bbmojq8j44fu7" path="res://scenes/ui/coat/coat.tscn" id="2_1x5wo"]
[ext_resource type="PackedScene" uid="uid://cfy6at1ik16lv" path="res://scenes/notes/notes.tscn" id="2_qh136"]
[ext_resource type="Material" uid="uid://cr6c0y0fooqqb" path="res://assets/mats/mat_dark_blue.tres" id="4_xa8uo"]
[ext_resource type="Script" uid="uid://elbvrempoclv" path="res://scenes/world/test_interact.gd" id="5_3a8i7"]
[ext_resource type="Script" uid="uid://bejw17crfjdit" path="res://scripts/components/interactable_component.gd" id="5_3yebw"]
[ext_resource type="Resource" uid="uid://b16n357oao8a4" path="res://scenes/entity/intro_sign_dialogue.dialogue" id="6_at7wc"]

[sub_resource type="Environment" id="Environment_n6r0k"]
background_mode = 1
fog_light_energy = 0.1
fog_density = 0.05

[sub_resource type="BoxMesh" id="BoxMesh_n6r0k"]
size = Vector3(100, 1, 100)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_d0qum"]
data = PackedVector3Array(-50, 0.5, 50, 50, 0.5, 50, -50, -0.5, 50, 50, 0.5, 50, 50, -0.5, 50, -50, -0.5, 50, 50, 0.5, -50, -50, 0.5, -50, 50, -0.5, -50, -50, 0.5, -50, -50, -0.5, -50, 50, -0.5, -50, 50, 0.5, 50, 50, 0.5, -50, 50, -0.5, 50, 50, 0.5, -50, 50, -0.5, -50, 50, -0.5, 50, -50, 0.5, -50, -50, 0.5, 50, -50, -0.5, -50, -50, 0.5, 50, -50, -0.5, 50, -50, -0.5, -50, 50, 0.5, 50, -50, 0.5, 50, 50, 0.5, -50, -50, 0.5, 50, -50, 0.5, -50, 50, 0.5, -50, -50, -0.5, 50, 50, -0.5, 50, -50, -0.5, -50, 50, -0.5, 50, 50, -0.5, -50, -50, -0.5, -50)

[sub_resource type="BoxMesh" id="BoxMesh_klhe0"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_klhe0"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="BoxMesh" id="BoxMesh_at7wc"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xa8uo"]
albedo_color = Color(0, 0.633333, 1, 1)

[sub_resource type="BoxMesh" id="BoxMesh_3yebw"]
size = Vector3(10, 10, 1)

[sub_resource type="BoxMesh" id="BoxMesh_3a8i7"]
size = Vector3(10, 10, 10)

[node name="town" type="Node3D"]
script = ExtResource("1_klhe0")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="notes" parent="CanvasLayer" instance=ExtResource("2_qh136")]

[node name="coat" parent="CanvasLayer" instance=ExtResource("2_1x5wo")]

[node name="env" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_n6r0k")

[node name="moon" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.788376, 0.615194, 0, -0.615194, 0.788376, 0, 20, 0)
light_energy = 0.01

[node name="floor" type="MeshInstance3D" parent="."]
mesh = SubResource("BoxMesh_n6r0k")
surface_material_override/0 = ExtResource("4_xa8uo")

[node name="StaticBody3D" type="StaticBody3D" parent="floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="floor/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_d0qum")

[node name="player" parent="." instance=ExtResource("1_d0qum")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="omni1" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.66512, 2.71206, 0)
light_energy = 16.0
shadow_enabled = true
omni_attenuation = 0.1

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 19.2083, 1.57132, 10.0905)
light_energy = 16.0
shadow_enabled = true
spot_range = 20.0
spot_attenuation = 0.1
spot_angle = 20.0
spot_angle_attenuation = 0.1

[node name="SpotLight3D2" type="SpotLight3D" parent="."]
transform = Transform3D(0.956996, 0, -0.290101, 0, 1, 0, 0.290101, 0, 0.956996, -28.9368, 1.57132, 22.5606)
light_energy = 16.0
shadow_enabled = true
spot_range = 20.0
spot_attenuation = 0.1
spot_angle = 20.0
spot_angle_attenuation = 0.1

[node name="SpotLight3D3" type="SpotLight3D" parent="."]
transform = Transform3D(-0.99941, 0, 0.0343587, 0, 1, 0, -0.0343587, 0, -0.99941, -33.9632, 1.57132, -22.7494)
light_energy = 16.0
shadow_enabled = true
spot_range = 20.0
spot_attenuation = 0.1
spot_angle = 20.0
spot_angle_attenuation = 0.1

[node name="MeshInstance3D" type="MeshInstance3D" parent="." node_paths=PackedStringArray("interactable")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 1, -8)
mesh = SubResource("BoxMesh_klhe0")
script = ExtResource("5_3a8i7")
interactable = NodePath("StaticBody3D/InteractableComponent")
dialogue = ExtResource("6_at7wc")

[node name="StaticBody3D" type="StaticBody3D" parent="MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_klhe0")

[node name="InteractableComponent" type="Node" parent="MeshInstance3D/StaticBody3D"]
script = ExtResource("5_3yebw")
metadata/_custom_type_script = "uid://bejw17crfjdit"

[node name="spinning_box" type="MeshInstance3D" parent="MeshInstance3D"]
transform = Transform3D(0.282843, 0.2, 0.2, 0, 0.282843, -0.282843, -0.282843, 0.2, 0.2, 0, 1, 0)
mesh = SubResource("BoxMesh_at7wc")
surface_material_override/0 = SubResource("StandardMaterial3D_xa8uo")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25.0207, 0, 12.6074)
mesh = SubResource("BoxMesh_3yebw")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="."]
transform = Transform3D(0.960469, 0, 0.278388, 0, 1, 0, -0.278388, 0, 0.960469, -39.2464, 0, -12.7628)
mesh = SubResource("BoxMesh_3a8i7")
